<xml xmlns="http://www.w3.org/1999/xhtml"><block type="arduino_setup" x="38" y="13"><statement name="MySetup"><block type="string_declare"><field name="VAR">ClientRequest</field><value name="VALUE"><block type="text"><field name="TEXT"></field></block></value><next><block type="iots_disconnect"><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">START</field></block></value><next><block type="iots_connectnetwork_pass"><value name="ssid"><block type="text"><field name="TEXT">DAAG_WIFI</field></block></value><value name="password"><block type="text"><field name="TEXT">A5m6a9lgu688</field></block></value><next><block type="do_while"><value name="CONDI"><block type="logic_negate"><value name="BOOL"><block type="iots_isconnected"></block></value></block></value><statement name="STATNAME"><block type="base_delayms"><value name="DELAY_TIME"><block type="math_number"><field name="NUM">300</field></block></value><next><block type="serial_printL"><value name="CONTENT"><block type="text"><field name="TEXT">.</field></block></value></block></next></block></statement><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT"></field></block></value><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">Connected</field></block></value><next><block type="iots_staticip"><field name="IP">192,168,1,20</field><field name="gateway">192,168,1,1</field><field name="masque">255,255,255,0</field><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">Your IP is:</field></block></value><next><block type="serial_print"><value name="CONTENT"><block type="iots_localip"></block></value><next><block type="iot_startserver"><value name="port"><block type="math_number"><field name="NUM">80</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="MyLoop"><block type="iot_waitconnection"><next><block type="string_set"><field name="VAR">ClientRequest</field><value name="VALUE"><block type="iotServer_readrequest"></block></value><next><block type="string_iot_clearhttp"><field name="VAR">ClientRequest</field><next><block type="controls_if"><value name="IF0"><block type="string_equalto"><field name="VAR">ClientRequest</field><value name="input_to_compare"><block type="text"><field name="TEXT">on</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write"><field name="PIN">16</field><field name="STAT">LOW</field></block></statement><next><block type="controls_if"><value name="IF0"><block type="string_equalto"><field name="VAR">ClientRequest</field><value name="input_to_compare"><block type="text"><field name="TEXT">off</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write"><field name="PIN">16</field><field name="STAT">HIGH</field></block></statement><next><block type="webpage_html"><statement name="page_body"><block type="webpage_button"><value name="link"><block type="text"><field name="TEXT">http://192.168.1.20/on</field></block></value><value name="title"><block type="text"><field name="TEXT">On</field></block></value><next><block type="webpage_button"><value name="link"><block type="text"><field name="TEXT">http://192.168.1.20/off</field></block></value><value name="title"><block type="text"><field name="TEXT">Off</field></block></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>